# –ß—Ç–æ —Ç–∞–∫–æ–µ Event loop –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç? –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∞—Ö –∏ –º–∞–∫—Ä–æ–∑–∞–¥–∞—á–∞—Ö.

**–û—Ç–≤–µ—Ç:**

**Event Loop** ‚Äî —ç—Ç–æ –¥–∏—Å–ø–µ—Ç—á–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –∫–∞–∫–æ–π –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º. JavaScript –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–ø–æ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ –∑–∞ —Ä–∞–∑**.

```javascript
// üîç –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

console.log('1');                                    // –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥

setTimeout(() => console.log('2'), 0);               // üì¶ –ú–ê–ö–†–û–ó–ê–î–ê–ß–ê

Promise.resolve().then(() => console.log('3'));     // ‚ö° –ú–ò–ö–†–û–ó–ê–î–ê–ß–ê

console.log('4');                                    // –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥

// –†–µ–∑—É–ª—å—Ç–∞—Ç: 1, 4, 3, 2
// –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫? üëá
```

**üèÉ‚Äç‚ôÇÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Event Loop:**

```javascript
// üîç –®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

// 1Ô∏è‚É£ CALL STACK (—Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤) - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–µ–π—á–∞—Å
function main() {
  console.log('–ù–∞—á–∞–ª–æ');     // ‚Üê –°–µ–π—á–∞—Å –∑–¥–µ—Å—å
  setTimeout(callback, 0);   // ‚Üí –£—Ö–æ–¥–∏—Ç –≤ Web API
  console.log('–ö–æ–Ω–µ—Ü');      // ‚Üê –°–ª–µ–¥—É—é—â–∏–π –≤ —Å—Ç–µ–∫–µ
}

// 2Ô∏è‚É£ WEB APIs - "—Ñ–æ–Ω–æ–≤—ã–µ" –æ–ø–µ—Ä–∞—Ü–∏–∏
// setTimeout, DOM events, fetch - —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

// 3Ô∏è‚É£ MICROTASK QUEUE - –æ—á–µ—Ä–µ–¥—å –º–∏–∫—Ä–æ–∑–∞–¥–∞—á
Promise.resolve().then(() => console.log('–ú–∏–∫—Ä–æ'));

// 4Ô∏è‚É£ CALLBACK QUEUE - –æ—á–µ—Ä–µ–¥—å –º–∞–∫—Ä–æ–∑–∞–¥–∞—á  
setTimeout(() => console.log('–ú–∞–∫—Ä–æ'), 0);

// –ê–ª–≥–æ—Ä–∏—Ç–º Event Loop:
// 1. –í—ã–ø–æ–ª–Ω–∏ –≤–µ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ (Call Stack)
// 2. –í—ã–ø–æ–ª–Ω–∏ –í–°–ï –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏
// 3. –í—ã–ø–æ–ª–Ω–∏ –û–î–ù–£ –º–∞–∫—Ä–æ–∑–∞–¥–∞—á—É
// 4. –ü–æ–≤—Ç–æ—Ä–∏ —Å –ø—É–Ω–∫—Ç–∞ 2
```

**‚ö° –ú–ò–ö–†–û–ó–ê–î–ê–ß–ò (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**
```javascript
Promise.resolve().then(() => console.log('Promise'));
queueMicrotask(() => console.log('Microtask'));
// –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –í–°–ï –ø–æ–¥—Ä—è–¥
```

**üì¶ –ú–ê–ö–†–û–ó–ê–î–ê–ß–ò (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**
```javascript
setTimeout(() => console.log('Timeout'), 0);
setInterval(() => console.log('Interval'), 100);
// –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –û–î–ù–ê –∑–∞ —Ä–∞–∑
```

**üéØ –°–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä:**
```javascript
console.log('Start');

setTimeout(() => console.log('Timeout 1'), 0);

Promise.resolve()
  .then(() => console.log('Promise 1'))
  .then(() => console.log('Promise 2'));

setTimeout(() => console.log('Timeout 2'), 0);

console.log('End');

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// Start
// End
// Promise 1
// Promise 2
// Timeout 1
// Timeout 2
```

**üß† –ö–∞–∫ –∑–∞–ø–æ–º–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã?**
1. **–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É
2. **–ú–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏** ‚Äî **–º–∏–∫—Ä–æ** = –±—ã—Å—Ç—Ä—ã–µ, **–≤—Å–µ —Å—Ä–∞–∑—É**
3. **–ú–∞–∫—Ä–æ–∑–∞–¥–∞—á–∏** ‚Äî **–º–∞–∫—Ä–æ** = –º–µ–¥–ª–µ–Ω–Ω—ã–µ, **–ø–æ –æ–¥–Ω–æ–π**

**üìä –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```javascript
// –ü–ª–æ—Ö–æ - –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
for (let i = 0; i < 1000000; i++) {
  // –¢—è–∂–µ–ª–∞—è —Ä–∞–±–æ—Ç–∞
}

// –•–æ—Ä–æ—à–æ - —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏
function heavyWork(i = 0) {
  if (i < 1000000) {
    // –ù–µ–±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Ä–∞–±–æ—Ç—ã
    doSomeWork(i);
    
    // –î–∞–µ–º –±—Ä–∞—É–∑–µ—Ä—É –æ—Ç–¥–æ—Ö–Ω—É—Ç—å
    setTimeout(() => heavyWork(i + 1000), 0);
  }
}
```

**–í—ã–≤–æ–¥:**
Event Loop —Å–ª–µ–¥–∏—Ç –∑–∞ –ø–æ—Ä—è–¥–∫–æ–º: —Å–Ω–∞—á–∞–ª–∞ –≤–µ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥, –ø–æ—Ç–æ–º –≤—Å–µ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏, –ø–æ—Ç–æ–º –æ–¥–Ω–∞ –º–∞–∫—Ä–æ–∑–∞–¥–∞—á–∞.