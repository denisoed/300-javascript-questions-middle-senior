# Function vs Arrow Function - –≤ —á–µ–º –∫–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è?

üéØ **–û—Ç–≤–µ—Ç:** –û–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ ‚Äî —ç—Ç–æ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –≤ JavaScript. –ì–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ ‚Äî –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å `this` –∏ —á—Ç–æ —É –Ω–∏—Ö –µ—Å—Ç—å/–Ω–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".

**üîç –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è:**

```javascript
// üîç 1. –°–ò–ù–¢–ê–ö–°–ò–° - –∫–æ—Ä–æ—á–µ –∑–∞–ø–∏—Å–∞—Ç—å
// –û–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è - –±–æ–ª—å—à–µ –±—É–∫–≤
function normalAdd(a, b) {
  return a + b;
}

// –°—Ç—Ä–µ–ª–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è - –∫–æ—Ä–æ—á–µ
const arrowAdd = (a, b) => a + b;

// –ï—â—ë –∫–æ—Ä–æ—á–µ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
const double = x => x * 2;
const sayHello = () => 'Hello!';

// üîç 2. THIS CONTEXT - –≥–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ!
const person = {
  name: '–ò–≤–∞–Ω',
  
  // –û–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è - this –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–∑–æ–≤–∞
  sayNameNormal: function() {
    console.log(`–ú–µ–Ω—è –∑–æ–≤—É—Ç ${this.name}`); // '–ò–≤–∞–Ω'
    
    // –ü—Ä–æ–±–ª–µ–º–∞: this —Ç–µ—Ä—è–µ—Ç—Å—è –≤ –∫–æ–ª–±—ç–∫–µ
    setTimeout(function() {
      console.log(`–ü—Ä–∏–≤–µ—Ç –æ—Ç ${this.name}`); // undefined (this = window)
    }, 1000);
  },
  
  // –°—Ç—Ä–µ–ª–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è - this –ù–ï –º–µ–Ω—è–µ—Ç—Å—è
  sayNameArrow: function() {
    console.log(`–ú–µ–Ω—è –∑–æ–≤—É—Ç ${this.name}`); // '–ò–≤–∞–Ω'
    
    // –†–µ—à–µ–Ω–∏–µ: this —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å—Ç—Ä–µ–ª–æ—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
    setTimeout(() => {
      console.log(`–ü—Ä–∏–≤–µ—Ç –æ—Ç ${this.name}`); // '–ò–≤–∞–Ω' (this —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è!)
    }, 1000);
  },
  
  // ‚ùå –ü–ª–æ—Ö–æ: —Å—Ç—Ä–µ–ª–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–∞–∫ –º–µ—Ç–æ–¥
  wrongMethod: () => {
    console.log(this.name); // undefined (this = window, –∞ –Ω–µ person)
  }
};

// üîç 3. ARGUMENTS - –µ—Å—Ç—å/–Ω–µ—Ç
function withArguments() {
  console.log(arguments); // [1, 2, 3] - –ø—Å–µ–≤–¥–æ–º–∞—Å—Å–∏–≤
  console.log(arguments.length); // 3
}

const withoutArguments = () => {
  // console.log(arguments); // ‚ùå ReferenceError!
};

// –î–ª—è —Å—Ç—Ä–µ–ª–æ—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ rest parameters
const withRest = (...args) => {
  console.log(args); // [1, 2, 3] - –Ω–∞—Å—Ç–æ—è—â–∏–π –º–∞—Å—Å–∏–≤
  console.log(args.length); // 3
};

withArguments(1, 2, 3);
withRest(1, 2, 3);

// üîç 4. –ö–û–ù–°–¢–†–£–ö–¢–û–†–´ - –º–æ–∂–Ω–æ/–Ω–µ–ª—å–∑—è
function NormalConstructor(name) {
  this.name = name;
}

const user1 = new NormalConstructor('–ü–µ—Ç—Ä'); // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
console.log(user1.name); // '–ü–µ—Ç—Ä'

const ArrowConstructor = (name) => {
  this.name = name;
};

// const user2 = new ArrowConstructor('–ú–∞—Ä–∏—è'); // ‚ùå TypeError!

// üîç 5. HOISTING - –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è/–Ω–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è
console.log(hoistedFunc()); // ‚úÖ '–Ø –ø–æ–¥–Ω—è–ª—Å—è!' (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è)

function hoistedFunc() {
  return '–Ø –ø–æ–¥–Ω—è–ª—Å—è!';
}

// console.log(notHoisted()); // ‚ùå ReferenceError!

const notHoisted = () => '–Ø –Ω–µ –ø–æ–¥–Ω—è–ª—Å—è!';
```

**üîç –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**

```javascript
// üîç 1. Event handlers - where this matters
class Counter {
  constructor() {
    this.count = 0;
    this.button = document.querySelector('#myButton');
  }
  
  // ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±—ã—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
  bindWrong() {
    this.button.addEventListener('click', function() {
      this.count++; // ‚ùå this = button element, –∞ –Ω–µ Counter!
      console.log(this.count); // undefined
    });
  }
  
  // ‚úÖ –†–µ—à–µ–Ω–∏–µ —Å–æ —Å—Ç—Ä–µ–ª–æ—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
  bindCorrect() {
    this.button.addEventListener('click', () => {
      this.count++; // ‚úÖ this = Counter instance
      console.log(this.count); // 1, 2, 3...
    });
  }
  
  // ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å bind
  bindAlternative() {
    this.button.addEventListener('click', function() {
      this.count++;
      console.log(this.count);
    }.bind(this)); // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º this –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
  }
}

// üîç 2. Array methods - —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–µ–∑–¥–µ!
const numbers = [1, 2, 3, 4, 5];

// –ö–æ—Ä–æ—Ç–∫–æ –∏ –∫—Ä–∞—Å–∏–≤–æ
const doubled = numbers.map(x => x * 2);        // [2, 4, 6, 8, 10]
const evens = numbers.filter(x => x % 2 === 0); // [2, 4]
const sum = numbers.reduce((acc, x) => acc + x, 0); // 15

// Vs –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ - –≥—Ä–æ–º–æ–∑–¥–∫–æ
const doubledOld = numbers.map(function(x) { return x * 2; });

// üîç 3. Async/await - —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–¥–æ–±–Ω–µ–µ
const users = ['user1', 'user2', 'user3'];

// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const fetchUserData = async () => {
  const results = await Promise.all(
    users.map(async user => {
      const response = await fetch(`/api/users/${user}`);
      return response.json();
    })
  );
  return results;
};

// üîç 4. React/Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã - —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ
class ReactComponent {
  constructor() {
    this.state = { clicked: false };
  }
  
  // ‚úÖ –°—Ç—Ä–µ–ª–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è - this –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
  handleClick = () => {
    this.setState({ clicked: true });
  }
  
  // ‚ùå –û–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è - –Ω—É–∂–µ–Ω bind –≤ render
  handleClickWrong() {
    this.setState({ clicked: true });
  }
  
  render() {
    return `<button onclick="${this.handleClick}">Click me</button>`;
    // –ü—Ä–∏ –æ–±—ã—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏: onclick="${this.handleClickWrong.bind(this)}"
  }
}
```

**üß† –ú–Ω–µ–º–æ–Ω–∏–∫–∞ –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:**

- **Arrow function** = "**–°—Ç—Ä–µ–ª–∫–∞**" (—Ç–æ—á–Ω–æ –≤ —Ü–µ–ª—å - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç this)
- **Regular function** = "**–•–∞–º–µ–ª–µ–æ–Ω**" (this –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- **this –≤ —Å—Ç—Ä–µ–ª–æ—á–Ω–æ–π** = "**–ù–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è**"
- **this –≤ –æ–±—ã—á–Ω–æ–π** = "**–°–º–æ—Ç—Ä–∏—Ç –∫—Ç–æ –≤—ã–∑–≤–∞–ª**"

**‚ö° –ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

```javascript
// ‚úÖ –°–¢–†–ï–õ–û–ß–ù–´–ï –§–£–ù–ö–¶–ò–ò –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:

// 1. –ö–æ–ª–ª–±—ç–∫–æ–≤ –≤ –º–∞—Å—Å–∏–≤–∞—Ö
[1, 2, 3].map(x => x * 2)
[1, 2, 3].filter(x => x > 1)
[1, 2, 3].reduce((acc, x) => acc + x)

// 2. Event handlers –≤ –∫–ª–∞—Å—Å–∞—Ö
button.addEventListener('click', () => this.handleClick())

// 3. –ö–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
const add = (a, b) => a + b
const isEven = n => n % 2 === 0

// 4. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–æ–ª–ª–±—ç–∫–æ–≤
setTimeout(() => console.log('Hello'), 1000)
fetch('/api').then(res => res.json())

// ‚úÖ –û–ë–´–ß–ù–´–ï –§–£–ù–ö–¶–ò–ò –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:

// 1. –ú–µ—Ç–æ–¥–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤
const obj = {
  name: 'Test',
  getName: function() { return this.name; } // ‚úÖ this = obj
}

// 2. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤
function User(name) {
  this.name = name; // ‚úÖ this = –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
}

// 3. –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω arguments
function sum() {
  return Array.from(arguments).reduce((a, b) => a + b);
}

// 4. Event handlers –≥–¥–µ this = element
button.addEventListener('click', function() {
  this.style.color = 'red'; // this = button
});

// ‚ùå –ò–ó–ë–ï–ì–ê–ô–¢–ï:

// –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ –º–µ—Ç–æ–¥—ã –æ–±—ä–µ–∫—Ç–æ–≤
const badObj = {
  name: 'Test',
  getName: () => this.name // ‚ùå this = window, –∞ –Ω–µ badObj
};

// –û–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–æ–ª–ª–±—ç–∫–∞—Ö –∫–ª–∞—Å—Å–æ–≤
class BadClass {
  method() {
    setTimeout(function() {
      this.doSomething(); // ‚ùå this = window, –∞ –Ω–µ BadClass
    }, 1000);
  }
}
```

**‚ö° –†–∞–∑–±–æ—Ä –∫–æ–¥–∞ –∏–∑ –≤–æ–ø—Ä–æ—Å–∞:**

```javascript
// pluckDeep - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
const pluckDeep = key => obj => key.split('.').reduce((accum, key) => accum[key], obj);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
const user = { profile: { personal: { name: '–ò–≤–∞–Ω' } } };
const getName = pluckDeep('profile.personal.name');
console.log(getName(user)); // '–ò–≤–∞–Ω'

// compose - –∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π
const compose = (...fns) => res => fns.reduce((accum, next) => next(accum), res);

const add1 = x => x + 1;
const multiply2 = x => x * 2;  
const subtract3 = x => x - 3;

// –§—É–Ω–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ
const composed = compose(subtract3, multiply2, add1);
console.log(composed(5)); // (5 + 1) * 2 - 3 = 9

// unfold - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
const unfold = (f, seed) => {
  const go = (f, seed, acc) => {
    const res = f(seed);
    return res ? go(f, res[1], acc.concat([res[0]])) : acc;
  };
  return go(f, seed, []);
};

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —á–∏—Å–ª–∞ –æ—Ç 1 –¥–æ 5
const range = unfold(n => n <= 5 ? [n, n + 1] : null, 1);
console.log(range); // [1, 2, 3, 4, 5]
```

**–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:** –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—â–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç `this` –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –û–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –∏ –∏–º–µ—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `this`. –í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–¥–∞—á–∏: —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ –¥–ª—è –∫–æ–ª–ª–±—ç–∫–æ–≤ –∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π, –æ–±—ã—á–Ω—ã–µ –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤.