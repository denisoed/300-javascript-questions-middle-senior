# –ß—Ç–æ —Ç–∞–∫–æ–µ –∑–∞–ø–∏—Å–∏ (records) –∏ –∫–æ—Ä—Ç–µ–∂–∏ (tuples)? –ß–µ–º –æ–Ω–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤?

**–û—Ç–≤–µ—Ç:**

**Records –∏ Tuples** ‚Äî —ç—Ç–æ **–±—É–¥—É—â–∏–µ** –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è JavaScript (–ø–æ–∫–∞ proposal stage 2). –≠—Ç–æ –∫–∞–∫ `Object.freeze()`, –Ω–æ –ª—É—á—à–µ.

```javascript
// üîç RECORDS - –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã (–ë–£–î–£–©–ï–ï)

// –°–∏–Ω—Ç–∞–∫—Å–∏—Å –±—É–¥—É—â–µ–≥–æ (–ø–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):
const record = #{
  name: "–ò–≤–∞–Ω",
  age: 30,
  address: #{
    city: "–ú–æ—Å–∫–≤–∞",
    zip: "101000"
  }
};

// record.age = 31; // TypeError - –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å!

// üîç TUPLES - –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –º–∞—Å—Å–∏–≤—ã (–ë–£–î–£–©–ï–ï)  

const tuple = #[1, 2, 3];
// tuple[0] = 10; // TypeError - –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å!

// tuple.push(4); // TypeError - –Ω–µ—Ç –º—É—Ç–∏—Ä—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤!

// üîç –ì–ª–∞–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

// 1. –°–†–ê–í–ù–ï–ù–ò–ï –ü–û –ó–ù–ê–ß–ï–ù–ò–Æ
const obj1 = { name: "–ò–≤–∞–Ω" };
const obj2 = { name: "–ò–≤–∞–Ω" };
console.log(obj1 === obj2); // false ‚ùå (—Ä–∞–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏)

// –° records (–≤ –±—É–¥—É—â–µ–º):
// const rec1 = #{ name: "–ò–≤–∞–Ω" };
// const rec2 = #{ name: "–ò–≤–∞–Ω" };
// console.log(rec1 === rec2); // true ‚úÖ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)

// 2. –ù–ï–ò–ó–ú–ï–ù–Ø–ï–ú–û–°–¢–¨ –ì–õ–£–ë–û–ö–ê–Ø
const normalObj = { 
  user: { name: "–ò–≤–∞–Ω" },
  items: [1, 2, 3]
};
normalObj.user.name = "–ü–µ—Ç—Ä"; // –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å ‚ùå

// –° records:
// const recordObj = #{ 
//   user: #{ name: "–ò–≤–∞–Ω" },
//   items: #[1, 2, 3]
// };
// recordObj.user.name = "–ü–µ—Ç—Ä"; // TypeError ‚úÖ
```

**‚ö° –¢–ï–ö–£–©–ò–ï –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–´:**

```javascript
// üîç Object.freeze() - –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–∞—è –∑–∞–º–æ—Ä–æ–∑–∫–∞

const frozenObj = Object.freeze({
  name: "–ò–≤–∞–Ω",
  details: { age: 30 }
});

// frozenObj.name = "–ü–µ—Ç—Ä"; // TypeError –≤ strict mode
frozenObj.details.age = 31;   // –†–∞–±–æ—Ç–∞–µ—Ç! ‚ùå (–Ω–µ –≥–ª—É–±–æ–∫–∞—è –∑–∞–º–æ—Ä–æ–∑–∫–∞)

// üîç –ì–ª—É–±–æ–∫–∞—è –∑–∞–º–æ—Ä–æ–∑–∫–∞ (—Å–∞–º–æ–ø–∏—Å–Ω–∞—è)

function deepFreeze(obj) {
  // –ó–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ–º –≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
  Object.values(obj).forEach(value => {
    if (value && typeof value === 'object') {
      deepFreeze(value);
    }
  });
  
  return Object.freeze(obj);
}

const deepFrozenObj = deepFreeze({
  name: "–ò–≤–∞–Ω",
  details: { age: 30 },
  hobbies: ["—Ñ—É—Ç–±–æ–ª", "—á—Ç–µ–Ω–∏–µ"]
});

// deepFrozenObj.details.age = 31; // TypeError ‚úÖ

// üîç –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–∞—Å—Å–∏–≤–∞–º–∏

const numbers = [1, 2, 3];

// ‚ùå –ú—É—Ç–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
// numbers.push(4);      // –ò–∑–º–µ–Ω—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤
// numbers[0] = 10;      // –ò–∑–º–µ–Ω—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤

// ‚úÖ –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
const withAdded = [...numbers, 4];           // [1, 2, 3, 4]
const withChanged = numbers.map((n, i) => i === 0 ? 10 : n); // [10, 2, 3]
const filtered = numbers.filter(n => n > 1); // [2, 3]

console.log(numbers);    // [1, 2, 3] - –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è!
console.log(withAdded);  // [1, 2, 3, 4]

// üîç –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Map/Set –∫–∞–∫ –∫–ª—é—á–∏ (–±—É–¥–µ—Ç —Å records)

const map = new Map();

// –° –æ–±—ã—á–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
const key1 = { id: 1 };
const key2 = { id: 1 };
map.set(key1, "–∑–Ω–∞—á–µ–Ω–∏–µ1");
map.set(key2, "–∑–Ω–∞—á–µ–Ω–∏–µ2");
console.log(map.size); // 2 ‚ùå (—Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –∏–∑-–∑–∞ —Å—Å—ã–ª–æ–∫)

// –° records (–≤ –±—É–¥—É—â–µ–º):
// const recKey1 = #{ id: 1 };
// const recKey2 = #{ id: 1 };
// map.set(recKey1, "–∑–Ω–∞—á–µ–Ω–∏–µ1");
// map.set(recKey2, "–∑–Ω–∞—á–µ–Ω–∏–µ2"); // –ü–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –ø–µ—Ä–≤–æ–µ!
// console.log(map.size); // 1 ‚úÖ (–æ–¥–∏–Ω –∫–ª—é—á)
```

**üìö –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏:**

```javascript
// Immer - –ø—Ä–æ—Å—Ç–∞—è –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å
import { produce } from 'immer';

const state = {
  todos: [
    { id: 1, text: '–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ', done: false }
  ],
  user: { name: '–ò–≤–∞–Ω' }
};

const newState = produce(state, draft => {
  draft.todos.push({ id: 2, text: '–ü–æ–≥—É–ª—è—Ç—å —Å —Å–æ–±–∞–∫–æ–π', done: false });
  draft.user.name = '–ü–µ—Ç—Ä';
});

console.log(state === newState); // false - –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
console.log(state.todos.length); // 1 - –∏—Å—Ö–æ–¥–Ω—ã–π –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
console.log(newState.todos.length); // 2 - –Ω–æ–≤—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

**üß† –ö–∞–∫ –∑–∞–ø–æ–º–Ω–∏—Ç—å?**
- **Records** = –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ **–æ–±—ä–µ–∫—Ç—ã** (record = –∑–∞–ø–∏—Å—å)
- **Tuples** = –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ **–º–∞—Å—Å–∏–≤—ã** (tuple = –∫–æ—Ä—Ç–µ–∂)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ** = —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É

**üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:**

| –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å | –û–±—ã—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã | Records/Tuples |
|-------------|-----------------|----------------|
| **–ò–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å** | –î–∞ | –ù–µ—Ç |
| **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ** | –ü–æ —Å—Å—ã–ª–∫–µ | –ü–æ –∑–Ω–∞—á–µ–Ω–∏—é |
| **–ö–ª—é—á–∏ Map/Set** | –†–∞–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏ | –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è |

**–í—ã–≤–æ–¥:**
Records/Tuples ‚Äî —ç—Ç–æ –±—É–¥—É—â–∏–µ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é. –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Object.freeze()` –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ç–∏–ø–∞ Immer. 